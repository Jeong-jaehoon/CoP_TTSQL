# TTSQL - Text to SQL AI Assistant

í•œêµ­ì–´ ìì—°ì–´ë¥¼ SQL ì¿¼ë¦¬ë¡œ ë³€í™˜í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” AI ê¸°ë°˜ Assistantì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **í•œêµ­ì–´ ìì—°ì–´ â†’ SQL ìë™ ë³€í™˜**: "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì›" â†’ SQL ì¿¼ë¦¬
- **ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ**: ìƒì„±ëœ SQL ìë™ ì‹¤í–‰ ë° ê²°ê³¼ í‘œì‹œ
- **ë¡œì»¬ AI ëª¨ë¸**: Qwen 2.5 Coder 7B - ì¸í„°ë„· ì—†ì´ ì‘ë™
- **Docker ê¸°ë°˜ ë°°í¬**: ì›í´ë¦­ ì„¤ì¹˜ ë° ì‹¤í–‰
- **ë³´ì•ˆ**: SQL Injection ìë™ ë°©ì§€, SELECT ì¿¼ë¦¬ë§Œ í—ˆìš©

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: HTML, CSS, JavaScript
- **Backend**: Node.js + Express
- **Database**: SQLite (ë¡œì»¬)
- **AI Model**: Qwen 2.5 Coder 7B (via Ollama)
- **Infrastructure**: Docker + Docker Compose

## ğŸ”„ ì „ì²´ ì‘ë™ í”Œë¡œìš°

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì‚¬ìš©ì (ì›¹ ë¸Œë¼ìš°ì €)                      â”‚
â”‚                    http://localhost:8787                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ í•œê¸€ ì§ˆë¬¸ ì…ë ¥
                         â”‚ "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì›"
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (index.html)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ ì‚¬ìš©ì ì…ë ¥ ë°›ê¸°                                      â”‚  â”‚
â”‚  â”‚  â€¢ api.jsë¥¼ í†µí•´ ë°±ì—”ë“œ API í˜¸ì¶œ                         â”‚  â”‚
â”‚  â”‚  â€¢ ê²°ê³¼ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ í‘œì‹œ                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ POST /api/generate-sql
                         â”‚ {userQuery: "ê¸‰ì—¬ê°€ 5ì²œë§Œì›..."}
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend (server.js - Port 8787)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. í•œê¸€ ì¿¼ë¦¬ ìˆ˜ì‹                                        â”‚  â”‚
â”‚  â”‚  2. Ollama APIë¡œ ì „ë‹¬                                   â”‚  â”‚
â”‚  â”‚  3. ìƒì„±ëœ SQL ë°›ê¸°                                      â”‚  â”‚
â”‚  â”‚  4. SQLiteì—ì„œ SQL ì‹¤í–‰                                 â”‚  â”‚
â”‚  â”‚  5. ê²°ê³¼ ë°˜í™˜                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ POST /v1/chat/completions
                         â”‚ {model: "qwen2.5-coder:7b", ...}
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Ollama Service (Port 11434) - Docker              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚             Qwen 2.5 Coder 7B (AI ëª¨ë¸)               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í•œê¸€ ìì—°ì–´ ì´í•´                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì¸ì‹                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ SQL ì¿¼ë¦¬ ìƒì„±                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ "5ì²œë§Œì›" â†’ 50000000 ìë™ ë³€í™˜               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ SQL ë°˜í™˜
                         â”‚ "SELECT name, department, salary
                         â”‚  FROM employees
                         â”‚  WHERE salary >= 50000000;"
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SQLite Database (ë¡œì»¬ íŒŒì¼ DB)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  í…Œì´ë¸”:                                               â”‚  â”‚
â”‚  â”‚  â€¢ employees (ì§ì›)                                   â”‚  â”‚
â”‚  â”‚  â€¢ departments (ë¶€ì„œ)                                 â”‚  â”‚
â”‚  â”‚  â€¢ projects (í”„ë¡œì íŠ¸)                                â”‚  â”‚
â”‚  â”‚  â€¢ employee_projects (ì°¸ì—¬ê´€ê³„)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ ì¿¼ë¦¬ ê²°ê³¼
                         â”‚ [{name: "ê¹€ì² ìˆ˜", ...}, ...]
                         â”‚
                         â–¼
              ì‚¬ìš©ìì—ê²Œ í…Œì´ë¸”ë¡œ í‘œì‹œ
```

### ìƒì„¸ ì²˜ë¦¬ ê³¼ì •

#### 1ï¸âƒ£ ì‚¬ìš©ì ì…ë ¥ (Frontend)
```javascript
// index.htmlì˜ JavaScript
ì‚¬ìš©ìê°€ "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì›" ì…ë ¥
  â†“
sendMessage() í•¨ìˆ˜ í˜¸ì¶œ
  â†“
ttsqlAPI.generateAndExecuteSQL(message) í˜¸ì¶œ
```

#### 2ï¸âƒ£ API í˜¸ì¶œ (api.js)
```javascript
// api.js - TTSQLAPI í´ë˜ìŠ¤
fetch('/api/generate-sql', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({userQuery: "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì›"})
})
```

#### 3ï¸âƒ£ ë°±ì—”ë“œ ì²˜ë¦¬ (server.js)
```javascript
// server.js - Express ì„œë²„
app.post('/api/generate-sql', async (req, res) => {
  const { userQuery } = req.body;

  // 1. Ollama API í˜¸ì¶œ
  const ollamaResponse = await fetch('http://localhost:11434/v1/chat/completions', {
    method: 'POST',
    body: JSON.stringify({
      model: 'qwen2.5-coder:7b',
      messages: [
        {role: 'system', content: 'í•œêµ­ì–´ë¥¼ SQLë¡œ ë³€í™˜...'},
        {role: 'user', content: userQuery}
      ]
    })
  });

  // 2. SQL ì¶”ì¶œ
  let sql = ollamaResponse.choices[0].message.content;

  // 3. SQLite ì‹¤í–‰
  const results = db.prepare(sql).all();

  // 4. ê²°ê³¼ ë°˜í™˜
  res.json({
    success: true,
    generatedSQL: sql,
    data: results
  });
});
```

#### 4ï¸âƒ£ AI ëª¨ë¸ ì²˜ë¦¬ (Ollama + Qwen)
```
ì…ë ¥: "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì›"

Qwen 2.5 Coder 7B ëª¨ë¸ ì²˜ë¦¬:
â”œâ”€ í•œê¸€ ì´í•´: "ê¸‰ì—¬", "5ì²œë§Œì›", "ì´ìƒ", "ì§ì›"
â”œâ”€ ìˆ«ì ë³€í™˜: 5ì²œë§Œì› â†’ 50000000
â”œâ”€ ìŠ¤í‚¤ë§ˆ ë§¤í•‘: employees í…Œì´ë¸”ì˜ salary ì»¬ëŸ¼
â””â”€ SQL ìƒì„±:
   SELECT name, department, salary
   FROM employees
   WHERE salary >= 50000000;
```

#### 5ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ
```sql
-- ìƒì„±ëœ SQLì´ SQLiteì—ì„œ ì‹¤í–‰ë¨
SELECT name, department, salary
FROM employees
WHERE salary >= 50000000;

-- ê²°ê³¼ ë°˜í™˜
[
  {name: "ê¹€ì² ìˆ˜", department: "ê°œë°œíŒ€", salary: 55000000},
  {name: "ì´ì˜í¬", department: "ë§ˆì¼€íŒ…íŒ€", salary: 52000000},
  ...
]
```

#### 6ï¸âƒ£ ê²°ê³¼ í‘œì‹œ (Frontend)
```javascript
// index.htmlì˜ addMessage() í•¨ìˆ˜
ê²°ê³¼ë¥¼ HTML í…Œì´ë¸”ë¡œ ë³€í™˜í•˜ì—¬ í‘œì‹œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì´ë¦„   â”‚   ë¶€ì„œ   â”‚    ê¸‰ì—¬    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê¹€ì² ìˆ˜  â”‚ ê°œë°œíŒ€   â”‚ 55,000,000ì›â”‚
â”‚ ì´ì˜í¬  â”‚ ë§ˆì¼€íŒ…íŒ€ â”‚ 52,000,000ì›â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë³´ì•ˆ ì²˜ë¦¬ ê³¼ì •

```
ì‚¬ìš©ì ì…ë ¥
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI ë ˆë²¨ ë³´ì•ˆ (Qwen ëª¨ë¸)        â”‚
â”‚  â€¢ SELECT ì¿¼ë¦¬ë§Œ ìƒì„±í•˜ë„ë¡ í•™ìŠµ  â”‚
â”‚  â€¢ ìœ„í—˜í•œ SQL ë¬¸ë²• í•„í„°ë§         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì„œë²„ ë ˆë²¨ ë³´ì•ˆ (server.js)      â”‚
â”‚  â€¢ SQL ì½”ë“œ ë¸”ë¡ ì œê±°            â”‚
â”‚  â€¢ ì„¤ëª…ë¬¸ ì œê±°                   â”‚
â”‚  â€¢ ì„¸ë¯¸ì½œë¡  ì´í›„ í…ìŠ¤íŠ¸ ì œê±°      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ì•ˆì „í•œ SQL ì‹¤í–‰
```

### Docker ì»¨í…Œì´ë„ˆ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ttsql-app (Docker Container)               â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Ollama Service (ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰)                  â”‚  â”‚
â”‚  â”‚  â€¢ Port: 11434                                   â”‚  â”‚
â”‚  â”‚  â€¢ Model: Qwen 2.5 Coder 7B (5GB)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node.js Server                                  â”‚  â”‚
â”‚  â”‚  â€¢ Port: 8787                                    â”‚  â”‚
â”‚  â”‚  â€¢ Express API                                   â”‚  â”‚
â”‚  â”‚  â€¢ Static File Serving (index.html)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SQLite Database                                 â”‚  â”‚
â”‚  â”‚  â€¢ ë¡œì»¬ íŒŒì¼ DB                                   â”‚  â”‚
â”‚  â”‚  â€¢ Volume: ttsql-data                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Volume ë§¤í•‘:
â€¢ ttsql-data â†’ ë°ì´í„°ë² ì´ìŠ¤ ì˜êµ¬ ì €ì¥
â€¢ ollama-models â†’ AI ëª¨ë¸ ì˜êµ¬ ì €ì¥
```

### ì„±ëŠ¥ ìµœì í™”

```
ì‚¬ìš©ì ìš”ì²­
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìºì‹± ë ˆì´ì–´ (í–¥í›„ ì¶”ê°€ ê°€ëŠ¥)     â”‚
â”‚  â€¢ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ ìºì‹±        â”‚
â”‚  â€¢ SQL ê²°ê³¼ ìºì‹±                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ollama (ë¡œì»¬ AI)                â”‚
â”‚  â€¢ Temperature: 0.1 (ì¼ê´€ì„±)     â”‚
â”‚  â€¢ Max Tokens: 200 (ë¹ ë¥¸ ì‘ë‹µ)   â”‚
â”‚  â€¢ Context Size: 2048           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ë¹ ë¥¸ ì‘ë‹µ (5-10ì´ˆ)
```

## ğŸ“‹ ë¹ ë¥¸ ì‹œì‘ (Docker ì‚¬ìš©)

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- Docker 20.10 ì´ìƒ
- Docker Compose 1.29 ì´ìƒ
- ìµœì†Œ 4GB RAM (ê¶Œì¥: 8GB)
- ìµœì†Œ 10GB ë””ìŠ¤í¬ ê³µê°„

### 1. í”„ë¡œì íŠ¸ ë³µì œ
```bash
git clone <repository-url>
cd CoP_TTSQL
```

### 2. Dockerë¡œ ì‹¤í–‰ (ì›í´ë¦­!)

**ë°©ë²• 1: ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥)**
```bash
# Linux/macOS
chmod +x deploy.sh
./deploy.sh

# Windows
deploy.bat
```

**ë°©ë²• 2: ìˆ˜ë™ ì‹¤í–‰**
```bash
# Docker Composeë¡œ ë¹Œë“œ ë° ì‹¤í–‰
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### 3. ì ‘ì†
- **ì›¹ ì¸í„°í˜ì´ìŠ¤**: http://localhost:8787
- **Ollama API**: http://localhost:11434

### 4. ì¤‘ì§€ ë° ì¬ì‹œì‘
```bash
# ì¤‘ì§€
docker-compose down

# ì¬ì‹œì‘
docker-compose restart

# ë°ì´í„° í¬í•¨ ì™„ì „ ì‚­ì œ
docker-compose down -v
```

## ğŸ’» ë¡œì»¬ ê°œë°œ (Docker ì—†ì´)

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. Ollama ì„¤ì¹˜
```bash
# macOS/Linux
curl -fsSL https://ollama.com/install.sh | sh

# Windows
# https://ollama.com/download ì—ì„œ ì„¤ì¹˜
```

### 3. Qwen ëª¨ë¸ ì„¤ì¹˜
```bash
ollama pull qwen2.5-coder:7b
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
mkdir -p .wrangler/state/v3/d1/miniflare-D1DatabaseObject
sqlite3 .wrangler/state/v3/d1/miniflare-D1DatabaseObject/564d6d4472287d20481b022665002f2909cb38565ac6b37af2e9b098a112a750.sqlite < schema.sql
sqlite3 .wrangler/state/v3/d1/miniflare-D1DatabaseObject/564d6d4472287d20481b022665002f2909cb38565ac6b37af2e9b098a112a750.sqlite < seed.sql
```

### 5. ì„œë²„ ì‹¤í–‰
```bash
# Ollama ì„œë¹„ìŠ¤ ì‹œì‘ (ë°±ê·¸ë¼ìš´ë“œ)
ollama serve &

# Node.js ì„œë²„ ì‹œì‘
node server.js
```

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥

### SQL Injection ë°©ì§€
- AI ë ˆë²¨: Qwen ëª¨ë¸ì´ SELECT ì¿¼ë¦¬ë§Œ ìƒì„±í•˜ë„ë¡ í•™ìŠµë¨
- ì„œë²„ ë ˆë²¨: ìœ„í—˜í•œ í‚¤ì›Œë“œ ì°¨ë‹¨ (DROP, DELETE, INSERT ë“±)
- SELECT ë¬¸ë§Œ ì‹¤í–‰ í—ˆìš©

### ë°ì´í„° í”„ë¼ì´ë²„ì‹œ
- ë¡œì»¬ AI ëª¨ë¸ ì‚¬ìš© - ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ
- ëª¨ë“  ë°ì´í„°ê°€ ë¡œì»¬ ì„œë²„ì—ë§Œ ì €ì¥
- ì¸í„°ë„· ì—†ì´ë„ ì‘ë™ ê°€ëŠ¥

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
CoP_TTSQL/
â”œâ”€â”€ README.md                 # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ DEPLOYMENT.md            # ë°°í¬ ê°€ì´ë“œ
â”œâ”€â”€ package.json             # Node.js ì˜ì¡´ì„±
â”œâ”€â”€ Dockerfile               # Docker ì´ë¯¸ì§€ ë¹Œë“œ
â”œâ”€â”€ docker-compose.yml       # Docker Compose ì„¤ì •
â”œâ”€â”€ docker-entrypoint.sh     # ì»¨í…Œì´ë„ˆ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ Modelfile                # Ollama ì»¤ìŠ¤í…€ ëª¨ë¸ ì„¤ì •
â”œâ”€â”€ server.js                # Node.js Express ì„œë²„
â”œâ”€â”€ api.js                   # API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ config.js                # ì„¤ì • íŒŒì¼
â”œâ”€â”€ index.html               # ë©”ì¸ ì›¹ í˜ì´ì§€
â”œâ”€â”€ schema.sql               # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ seed.sql                 # ìƒ˜í”Œ ë°ì´í„°
â”œâ”€â”€ test-korean.js           # í•œê¸€â†’SQL í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ images/                  # ì´ë¯¸ì§€ ë¦¬ì†ŒìŠ¤
```

## ğŸš€ ë°°í¬

ìì„¸í•œ ë°°í¬ ê°€ì´ë“œëŠ” [DEPLOYMENT.md](./DEPLOYMENT.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

### Docker Hub ë°°í¬
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t your-username/ttsql:latest .

# Docker Hub í‘¸ì‹œ
docker push your-username/ttsql:latest
```

### í´ë¼ìš°ë“œ ì„œë²„ ë°°í¬
- AWS EC2
- Google Cloud Platform
- DigitalOcean
- ìì²´ ì„œë²„

ìì„¸í•œ ë‚´ìš©ì€ DEPLOYMENT.mdë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ§ª í…ŒìŠ¤íŠ¸

### í•œê¸€â†’SQL ë³€í™˜ í…ŒìŠ¤íŠ¸
```bash
node test-korean.js
```

### API í…ŒìŠ¤íŠ¸
```bash
# í—¬ìŠ¤ì²´í¬
curl http://localhost:8787/api/test

# SQL ìƒì„± í…ŒìŠ¤íŠ¸
curl -X POST http://localhost:8787/api/generate-sql \
  -H "Content-Type: application/json" \
  -d '{"userQuery":"ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì› ì°¾ê¸°"}'
```

## ğŸ“Š ì§€ì›í•˜ëŠ” ì¿¼ë¦¬ ì˜ˆì‹œ

- "ê¸‰ì—¬ê°€ 5ì²œë§Œì› ì´ìƒì¸ ì§ì› ì°¾ê¸°"
- "ê°œë°œíŒ€ ì§ì› ëª©ë¡ ë³´ì—¬ì¤˜"
- "ê¸‰ì—¬ê°€ ë†’ì€ ì§ì› 5ëª…"
- "ì´ë¦„ì— ê¹€ì´ ë“¤ì–´ê°„ ì§ì›"
- "2023ë…„ì— ì…ì‚¬í•œ ì§ì›"
- "ë¶€ì„œë³„ í‰ê·  ê¸‰ì—¬"

ë” ë§ì€ ì˜ˆì‹œëŠ” `Modelfile`ì„ ì°¸ê³ í•˜ì„¸ìš”.

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **AI ëª¨ë¸**: ì²« ì‹¤í–‰ ì‹œ Qwen ëª¨ë¸ ë‹¤ìš´ë¡œë“œì— ì‹œê°„ì´ ê±¸ë¦½ë‹ˆë‹¤ (~5GB)
2. **ë©”ëª¨ë¦¬**: AI ëª¨ë¸ ì‹¤í–‰ì— ìµœì†Œ 4GB RAMì´ í•„ìš”í•©ë‹ˆë‹¤
3. **í¬íŠ¸**: 8787, 11434 í¬íŠ¸ê°€ ì‚¬ìš© ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License